<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link
	href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.css"
	rel="stylesheet">


<style type="text/css">
#update, #del {
	width: 50%;
}

th {
	text-align: center;
}
</style>
</head>

<body>
	<center>
		<h1>收藏表</h1>
	</center>
	
	
	<form action="">
	
	<caption><h3>增加申请</h3></caption>
	收藏ID:<input type="text" name="clid" placeholder="请输入收藏ID"/><br/>
	收藏时间:<input type="text" name="cltime" placeholder="请输入收藏时间"/><br/>
	用户ID:<input type="text" name="uid" placeholder="请输入用户ID"/><br/>
	拍品ID:<input type="text" name="gid" placeholder="请输入拍品ID"/><br/>
	<button type="button" class="btn btn-success">增加</button>
	</form>



	

	<table
		class="table table-hover table-striped table-bordered table-dark">
		<tr>
			<th>收藏ID</th>
			<th>用户ID</th>
			<th>拍品ID</th>
			<th>收藏时间</th>
			<th>修改</th>

		</tr>


	</table>
	
	<form action="">
	<caption><h3>修改申请</h3></caption>
	
	收藏ID:<input type="text" name="clid"/><br/>
	收藏时间:<input type="text" name="cltime"/><br/>
	用户ID:<input type="text" name="uid"/><br/>
	拍品ID:<input type="text" name="gid"/><br/>
	<button type="button" class="btn btn-warning">修改</button>
	</form>
	
	
</body>
</html>
<script type="text/javascript">
	$(function() {

		
		function updateTable() {
			$
					.ajax({
						type : "get",
						url : "/collects",
						headers : {
							"Accept" : "application/json"
						},
						success : function(data) {
							var tab = $("table:eq(0)");
							for (p in data) {
								/*  alert(data[p].eid+" "+data[p].ename+" "+data[p].birthday+" "+data[p].money);  */
								var tr = $("<tr>");
								var th = $("<th>");
								var th2 = $("<th>");
								var th3 = $("<th>");
								var th4 = $("<th>");
								var th5 = $("<th>");
								th.append(data[p].clid);
								th2.append(data[p].cltime);
								th3.append(data[p].uid);
								th4.append(data[p].gid);

								var update = $("<button id='update' type='button' class='btn btn-warning'>修改</button>");
								var del = $("<button  id='del' type='button' onclick='return confirm('确定要删除吗？')' class='btn btn-danger'>删除 </button>");
								
								del.click(function(){
									
									
									
									var apid=$(this).parent().parent().children().eq(0).html();
									$.ajax({
										
										type:"post",
										url:"/collects",
										data:{"clid":clid,"_method":"delete"},
										success:function(){
												
											updataTable();
										}
										
									});
									
								
									});
									
									
								th5.append(update, del);

								tr.append(th);
								tr.append(th2);
								tr.append(th3);
								tr.append(th4);
								tr.append(th5);
								tab.append(tr);

							}
						}
					});

		}
		
		updateTable();

	});
</script>